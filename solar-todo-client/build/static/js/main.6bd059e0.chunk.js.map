{"version":3,"sources":["context/AuthContext.js","context/alert/alertContext.js","components/Navbar.js","components/Alert.js","context/types.js","context/alert/alertReducer.js","context/alert/AlertState.js","context/api/apiContext.js","components/InputForm.js","components/Notes.js","components/Filter.js","pages/Home.js","pages/AuthPage.js","hooks/message.hook.js","hooks/http.hook.js","hooks/auth.hook.js","context/api/apiReducer.js","context/api/APIState.js","App.js","routes.js","reportWebVitals.js","index.js"],"names":["empty","AuthContext","createContext","token","userId","login","logout","isAuthenticated","AlertContext","Navbar","alert","useContext","auth","className","onClick","hide","type","Alert","visible","text","SHOW_ALERT","HIDE_ALERT","SHOW_LOADER","ADD_NOTE","FETCH_NOTES","REMOVE_NOTE","UPDATE_NOTE","handlers","DEFAULT","state","payload","alertReducer","action","AlertState","children","useReducer","dispatch","Provider","value","show","setTimeout","APIContext","InputForm","useState","setValue","addNote","onSubmit","event","preventDefault","trim","placeholder","onChange","target","Notes","notes","filter","removeNote","updateNote","note","done","map","style","textDecoration","Date","createdAt","toLocaleString","_id","id","Filter","setFilter","role","Home","loading","fetchNotes","useEffect","AuthPage","message","useCallback","window","M","toast","html","setLoading","error","setError","request","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","clearError","useHttp","email","password","form","setForm","changeHandler","name","registerHandler","loginHandler","htmlFor","disabled","storageName","curr","flag","apiReducer","baseUrl","process","API_BASE","APIState","showLoader","config","axios","get","res","Object","keys","key","post","status","App","setToken","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","exact","component","to","useRoutes","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","require","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8MAEA,SAASA,KAEF,I,IAAMC,EAAcC,wBAAc,CACrCC,MAAM,KACNC,OAAO,KACPC,MAAML,EACNM,OAAON,EACPO,iBAAgB,ICPPC,EAAeN,0B,OCIfO,EAAS,WAElB,IAAMC,EAAQC,qBAAWH,GAElBI,EAAOD,qBAAWV,GAMzB,OACI,sBAAKY,UAAU,8CAAf,UACI,qBAAKA,UAAU,eAAf,uBAGCD,EAAKL,iBAAmB,wBAAQO,QAVnB,WAClBF,EAAKN,SACLI,EAAMK,QAQuDC,KAAK,SAASH,UAAU,4BAAxD,gDClBxBI,EAAQ,WAEjB,MAAsBN,qBAAWH,GAA1BE,EAAP,EAAOA,MAAOK,EAAd,EAAcA,KAEd,OAAKL,EAAMQ,QAGP,sBAAKL,UAAS,sBAAiBH,EAAMM,MAAQ,UAA/B,sBAAd,UACI,iCAAwB,YAAfN,EAAMM,KAAqB,8BAAY,2BAC/CN,EAAMS,KACP,wBAAQL,QAASC,EAAMC,KAAK,SAASH,UAAU,YAAY,aAAW,aANnD,M,qBCPlBO,EAAa,aACbC,EAAa,aACbC,EAAc,cACdC,EAAW,WACXC,EAAc,cACdC,EAAc,cACdC,EAAc,cCJrBC,GAAQ,GACVC,QAAS,SAAAC,GAAK,OAAIA,IADR,cAETT,GAAY,SAACS,EAAD,OAASC,EAAT,EAASA,QAAT,mBAAC,eAA0BA,GAA3B,IAAoCZ,SAAQ,OAF/C,cAGTG,GAAY,SAAAQ,GAAK,kCAASA,GAAT,IAAgBX,SAAQ,OAHhC,GAMDa,EAAe,SAACF,EAAOG,GAEhC,OADcL,EAASK,EAAOhB,OAASW,EAASC,SAClCC,EAAOG,ICLZC,EAAa,SAAC,GAAe,IAAdC,EAAa,EAAbA,SACxB,EAA0BC,qBAAWJ,EAAc,CAACb,SAAS,IAA7D,mBAAOW,EAAP,KAAcO,EAAd,KAWMrB,EAAO,kBAAMqB,EAAS,CAACpB,KAAMK,KAEnC,OACI,cAACb,EAAa6B,SAAd,CAAuBC,MAAO,CAC1BC,KAbK,SAACpB,GAA4B,IAAtBH,EAAqB,uDAAd,UACvBoB,EAAS,CACLpB,KAAMI,EACNU,QAAS,CAACX,OAAMH,UAGpBwB,WAAWzB,EAAM,MAOPA,OACNL,MAAOmB,GAFX,SAIKK,K,OCtBAO,EAAavC,0BCGbwC,EAAY,WACrB,MAA0BC,mBAAS,IAAnC,mBAAOL,EAAP,KAAcM,EAAd,KACMlC,EAAQC,qBAAWH,GAClBqC,EAAWlC,qBAAW8B,GAAtBI,QAEA1C,EAASQ,qBAAWV,GAApBE,MAiBP,OACI,sBAAM2C,SAfY,SAAAC,GAClBA,EAAMC,iBACFV,EAAMW,QAENJ,EAAQP,EAAMnC,GAEdyC,EAAS,KAGTlC,EAAM6B,KAAK,oFAMgB1B,UAAU,cAAzC,SACI,qBAAKA,UAAU,aAAf,SACI,sBAAKA,UAAU,cAAf,UACI,uBACIG,KAAK,OACLH,UAAU,eACVqC,YAAY,uHACZZ,MAAOA,EACPa,SAAU,SAAAJ,GAAUH,EAASG,EAAMK,OAAOd,UAE9C,qBAAKzB,UAAU,qBAAf,SACI,wBAAQG,KAAK,SAASH,UAAU,4BAAhC,wECnCXwC,EAAQ,SAAC,GAAqB,IAApBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,OAE1B,EAAiC5C,qBAAW8B,GAArCe,EAAP,EAAOA,WAAYC,EAAnB,EAAmBA,WAEZtD,EAASQ,qBAAWV,GAApBE,MAGP,OACI,oBAAIU,UAAU,aAAd,SACKyC,EAAMC,QAAO,SAAAG,GACV,OAAQH,GACJ,KAAK,EACD,OAAO,EACX,KAAK,EACD,OAAOG,EAAKC,KAChB,KAAK,EACD,OAAQD,EAAKC,KAErB,OAAO,KACRC,KAAI,SAACF,GAAD,OACH,qBACI7C,UAAU,uBADd,UAGI,sBAAKA,UAAU,YAAf,UACI,yBAAQgD,MAAOH,EAAKC,KAAO,CAACG,eAAe,gBAAkB,GAA7D,cAAmEJ,EAAKvC,KAAxE,OACA,qBAAKN,UAAU,0BAAf,SAA0C,IAAIkD,KAAKL,EAAKM,WAAWC,sBAGvE,sBAAKpD,UAAU,UAAf,UACI,wBAAQC,QAAS,kBAAM2C,EAAWC,EAAKQ,KAAMR,EAAKC,KAAMxD,IAAQa,KAAK,SAASH,UAAW6C,EAAKC,KAAO,8BAAgC,sCAArI,0BACA,wBAAQ7C,QAAS,kBAAM0C,EAAWE,EAAKQ,IAAK/D,IAAQa,KAAK,SAASH,UAAU,qCAA5E,uBARG6C,EAAKS,UCxBnBC,EAAS,SAAC,GAAyB,IAAxBb,EAAuB,EAAvBA,OAAQc,EAAe,EAAfA,UAE5B,OACI,qBAAKxD,UAAU,SAAf,SACI,sBAAKA,UAAU,YAAYyD,KAAK,QAAQ,aAAW,gBAAnD,UACI,wBAAQxD,QAAS,kBAAMuD,EAAU,IAAIrD,KAAK,SAASH,UAAS,iBAAqB,IAAT0C,EAAa,GAAK,WAA9B,cAA5D,gCACA,wBAAQzC,QAAS,kBAAKuD,EAAU,IAAIrD,KAAK,SAASH,UAAS,iBAAqB,IAAT0C,EAAa,GAAK,WAA9B,cAA3D,gFACA,wBAAQzC,QAAS,kBAAKuD,EAAU,IAAIrD,KAAK,SAASH,UAAS,iBAAqB,IAAT0C,EAAa,GAAK,WAA9B,cAA3D,kGCDHgB,EAAO,WAEhB,MAAqC5D,qBAAW8B,GAAhCa,GAAhB,EAAOkB,QAAP,EAAgBlB,OAAOmB,EAAvB,EAAuBA,WAChBtE,EAASQ,qBAAWV,GAApBE,MAEP,EAA4BwC,mBAAS,GAArC,mBAAOY,EAAP,KAAec,EAAf,KAOA,OALAK,qBAAU,WACND,EAAWtE,KAEZ,IAGC,eAAC,WAAD,WACI,cAAC,EAAD,IACA,uBACA,cAAC,EAAD,CAAQoD,OAAQA,EAAQc,UAAWA,IACnC,cAAC,EAAD,CAAOf,MAAOA,EAAOC,OAAQA,Q,wBCnB5BoB,EAAW,WACpB,IAAM/D,EAAOD,qBAAWV,GAClB2E,ECLCC,uBAAY,SAAA1D,GAEX2D,OAAOC,GAAK5D,GACZ2D,OAAOC,EAAEC,MAAM,CAACC,KAAK9D,MAE3B,IDCF,EEPmB,WAEnB,MAA8BwB,oBAAS,GAAvC,mBAAO6B,EAAP,KAAgBU,EAAhB,KACA,EAA0BvC,mBAAS,MAAnC,mBAAOwC,EAAP,KAAcC,EAAd,KAgCA,MAAO,CAACZ,UAASa,QA9BDR,sBAAW,uCAAC,WAAOS,GAAP,mCAAAC,EAAA,6DAAYC,EAAZ,+BAAqB,MAAOC,EAA5B,+BAAmC,KAAMC,EAAzC,+BAAmD,GAC3ER,GAAW,GADa,SAGjBO,IACCA,EAAOE,KAAKC,UAAUH,GACtBC,EAAQ,gBAAkB,oBALV,SAOGG,MAAMP,EAAK,CAC/BE,SAAQC,OAAMC,YARG,cAOdI,EAPc,iBAWDA,EAASC,OAXR,WAWdC,EAXc,OAahBF,EAASG,GAbO,uBAcX,IAAIC,MAAMF,EAAKpB,SAAW,mFAdf,eAiBrBM,GAAW,GAjBU,kBAmBdc,GAnBc,wCAsBpBd,GAAW,GACXE,EAAS,KAAER,SAvBS,+DAAD,sDA0BxB,IAIuBO,QAAOgB,WAFdtB,uBAAa,kBAAKO,EAAS,QAAM,KF1BNgB,GAAvC5B,EAAP,EAAOA,QAASW,EAAhB,EAAgBA,MAAOE,EAAvB,EAAuBA,QAASc,EAAhC,EAAgCA,WAEhC,EAAwBxD,mBAAS,CAC7B0D,MAAM,GACNC,SAAS,KAFb,mBAAOC,EAAP,KAAaC,EAAb,KAKA9B,qBAAU,WACNE,EAAQO,GACRgB,MACD,CAAChB,EAAOP,EAASuB,IAEpB,IAAMM,EAAgB,SAAA1D,GAClByD,EAAQ,2BAAID,GAAL,kBAAYxD,EAAMK,OAAOsD,KAAM3D,EAAMK,OAAOd,UAGjDqE,EAAe,uCAAG,4BAAApB,EAAA,+EAEIF,EAAQ,qBAAqB,OAAtB,eAAkCkB,IAF7C,OAETP,EAFS,OAGhBpB,EAAQoB,EAAKpB,SAHG,uGAAH,qDAUfgC,EAAY,uCAAG,4BAAArB,EAAA,+EAEOF,EAAQ,kBAAkB,OAAnB,eAA+BkB,IAF7C,OAENP,EAFM,OAGbpF,EAAKP,MAAM2F,EAAK7F,MAAO6F,EAAK5F,QAHf,uGAAH,qDAWlB,OACI,cAAC,WAAD,UACI,sBAAKS,UAAU,OAAf,UACI,oBAAIA,UAAU,cAAd,gFACA,sBAAKA,UAAU,YAAf,UACI,sBAAKA,UAAU,qBAAf,UACI,uBAAOsC,SAAUsD,EAAezF,KAAK,QAAQH,UAAU,eAAesD,GAAG,QAAQuC,KAAK,QAAQxD,YAAY,qBACtG,uBAAO2D,QAAQ,QAAf,8BAER,sBAAKhG,UAAU,gBAAf,UACI,uBAAOsC,SAAUsD,EAAezF,KAAK,WAAWH,UAAU,eAAesD,GAAG,WAAWuC,KAAK,WAAWxD,YAAY,aAC/G,uBAAO2D,QAAQ,WAAf,yBAGR,uBAEA,wBAAS/F,QAAS8F,EAAcE,SAAUtC,EAAS3D,UAAU,sBAA7D,4CACA,wBAASC,QAAS6F,EAAiBG,SAAUtC,EAAS3D,UAAU,0BAAhE,mIG7DdkG,G,MAAc,Y,QCAdpF,GAAQ,mBACTL,GAAc,SAAAO,GAAK,kCAASA,GAAT,IAAgB2C,SAAQ,OADlC,cAETjD,GAAW,SAACM,EAAD,OAASC,EAAT,EAASA,QAAT,mBAAC,eAA0BD,GAA3B,IAAkCyB,MAAM,GAAD,mBAAMzB,EAAMyB,OAAZ,CAAmBxB,SAF5D,cAGTN,GAAc,SAACK,EAAD,OAASC,EAAT,EAASA,QAAT,mBAAC,eAA0BD,GAA3B,IAAkCyB,MAAMxB,EAAS0C,SAAQ,OAH9D,cAIT/C,GAAc,SAACI,EAAD,OAASC,EAAT,EAASA,QAAT,mBAAC,eAA0BD,GAA3B,IAAkCyB,MAAOzB,EAAMyB,MAAMC,QAAO,SAAAG,GAAI,OAAIA,EAAKQ,MAAQpC,UAJtF,cAKTJ,GAAc,SAACG,EAAD,OAASC,EAAT,EAASA,QAAT,mBAAC,eAA0BD,GAA3B,IAAkCyB,MAAOzB,EAAMyB,MAAMM,KAAI,SAACoD,GAA8D,OAAnDA,EAAK9C,MAAQpC,EAAQqC,KAAI6C,EAAKrD,KAAO7B,EAAQmF,MAAaD,UALpI,yBAMD,SAAAnF,GAAK,OAAIA,KANR,GASCqF,EAAa,SAACrF,EAAOG,GAEhC,OADeL,EAASK,EAAOhB,OAAWW,EAASC,SACrCC,EAAOG,I,iBCLnBmF,EAAUC,mIAAYC,UAAY,wBAE3BC,EAAW,SAAC,GAAe,IAAdpF,EAAa,EAAbA,SAMhBxB,EAAQC,qBAAWH,GAEzB,EAA0B2B,qBAAW+E,EAPhB,CACjB5D,MAAM,GACNkB,SAAQ,IAKZ,mBAAO3C,EAAP,KAAcO,EAAd,KAEMmF,EAAa,kBAAMnF,EAAS,CAACpB,KAAKM,KAElCmD,EAAU,uCAAG,WAAOtE,GAAP,mBAAAoF,EAAA,6DACfgC,IACMC,EAAS,CACX9B,QAAS,CACL,cAAiB,UAAYvF,IAJtB,SAOGsH,IAAMC,IAAN,UAAaP,EAAb,cAAkCK,GAPrC,OAOTG,EAPS,OAST7F,EAAU8F,OAAOC,KAAKF,EAAI3B,MAAMpC,KAAI,SAAAkE,GACtC,OAAO,2BACAH,EAAI3B,KAAK8B,IADhB,IAEI3D,GAAG2D,OAIX1F,EAAS,CACLpB,KAAKQ,EACLM,YAlBW,2CAAH,sDAsBVe,EAAO,uCAAG,WAAO1B,EAAMhB,GAAb,qBAAAoF,EAAA,6DACN7B,EAAO,CACTvC,QAEEqG,EAAS,CACX9B,QAAS,CACL,cAAiB,UAAYvF,IANzB,kBAUUsH,IAAMM,KAAN,UAAcZ,EAAd,iBAAsCzD,EAAM8D,GAVtD,OAUFG,EAVE,OAYF7F,EAZE,2BAaD6F,EAAI3B,KAAKtC,MAbR,IAcJS,GAAGwD,EAAI3B,KAAKtC,KAAKQ,MAEF,MAAfyD,EAAIK,QAAgBtH,EAAM6B,KAAK,wFAAmB,WAEtDH,EAAS,CAACpB,KAAKO,EAAUO,YAlBjB,wDAqBF,IAAIoE,MAAM,KAAEtB,SArBV,0DAAH,wDA0BPpB,EAAU,uCAAG,WAAOW,EAAIhE,GAAX,iBAAAoF,EAAA,6DACT7B,EAAO,CACTS,MAEEqD,EAAS,CACX9B,QAAS,CACL,cAAiB,UAAYvF,IANtB,SASGsH,IAAMM,KAAN,UAAcZ,EAAd,oBAAyCzD,EAAM8D,GATlD,OAWI,MAXJ,OAWPQ,QAAgBtH,EAAM6B,KAAK,wFAAmB,WACtDH,EAAS,CAACpB,KAAMS,EAAaK,QAASqC,IAZvB,2CAAH,wDAeVV,EAAU,uCAAG,WAAOU,EAAI8C,EAAM9G,GAAjB,iBAAAoF,EAAA,6DACT7B,EAAO,CACTS,KACAR,KAAKsD,GAEHO,EAAS,CACX9B,QAAS,CACL,cAAiB,UAAYvF,IAPtB,SAUGsH,IAAMM,KAAN,UAAcZ,EAAd,oBAAyCzD,EAAM8D,GAVlD,OAYI,MAZJ,OAYPQ,QAAgBtH,EAAM6B,KAAK,oGAAqB,WACxDH,EAAS,CAACpB,KAAKU,EAAaI,QAAQ,CAACqC,KAAI8C,UAb1B,2CAAH,0DAgBhB,OACI,cAACxE,EAAWJ,SAAZ,CAAqBC,MAAO,CACzBiF,aAAa1E,UAASW,aAAYiB,aAAYhB,aAC7Ce,QAAS3C,EAAM2C,QACflB,MAAOzB,EAAMyB,OAHjB,SAKKpB,KCxEE+F,MAxBf,WACI,MHRmB,WAEnB,MAA0BtF,mBAAS,MAAnC,mBAAOxC,EAAP,KAAc+H,EAAd,KACA,EAA4BvF,mBAAS,MAArC,mBAAOvC,EAAP,KAAe+H,EAAf,KAEM9H,EAAQwE,uBAAa,SAACuD,EAAUjE,GAClC+D,EAASE,GACTD,EAAUhE,GACVkE,aAAaC,QAAQvB,EAAapB,KAAKC,UAAU,CAACxF,OAAO+D,EAAIhE,MAAMiI,OAEpE,IACG9H,EAASuE,uBAAa,WACxBqD,EAAS,MACTC,EAAU,MACVE,aAAaE,WAAWxB,KACzB,IAWH,OATArC,qBAAU,WACN,IAAMsB,EAAOL,KAAK6C,MAAMH,aAAaI,QAAQ1B,IAE1Cf,GAAQA,EAAK7F,OACZE,EAAM2F,EAAK7F,MAAO6F,EAAK5F,UAG7B,CAACC,IAEI,CAACA,QAAOC,SAAQH,QAAOC,UGlBSsI,GAAhCvI,EAAP,EAAOA,MAAOE,EAAd,EAAcA,MAAOC,EAArB,EAAqBA,OAAQF,EAA7B,EAA6BA,OACvBG,IAAoBJ,EACpBwI,ECTe,SAAApI,GACrB,OAAIA,EAEI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOqI,KAAM,IAAKC,OAAK,EAACC,UAAWvE,IACnC,cAAC,IAAD,CAAUwE,GAAG,SAKrB,eAAC,IAAD,WACI,cAAC,IAAD,CAAOH,KAAM,IAAKC,OAAK,EAACC,UAAWnE,IACnC,cAAC,IAAD,CAAUoE,GAAG,SDHNC,CAAUzI,GAE3B,OAEI,cAAC,EAAD,UACI,cAACN,EAAYoC,SAAb,CAAsBC,MAAO,CAACnC,QAAOC,SAAQC,QAAOC,SAAQC,mBAA5D,SACQ,cAAC,EAAD,UACM,eAAC,IAAD,WACI,cAAC,EAAD,IACA,sBAAKM,UAAU,iBAAf,UACI,cAAC,EAAD,IACC8H,eEblBM,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,EAAQ,IAAUlC,SAElBmC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bd,M","file":"static/js/main.6bd059e0.chunk.js","sourcesContent":["import {createContext} from 'react';\r\n\r\nfunction empty() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token:null,\r\n    userId:null,\r\n    login:empty,\r\n    logout:empty,\r\n    isAuthenticated:false\r\n})\r\n","import {createContext} from 'react';\r\n\r\nexport const AlertContext = createContext();","import React, {useContext} from 'react';\r\nimport {AuthContext} from \"../context/AuthContext\";\r\nimport {AlertContext} from \"../context/alert/alertContext\";\r\n\r\n\r\n\r\nexport const Navbar = () => {\r\n\r\n    const alert = useContext(AlertContext);\r\n\r\n    const  auth = useContext(AuthContext);\r\n    const logoutHandler = () => {\r\n        auth.logout();\r\n        alert.hide();\r\n    }\r\n\r\n    return (\r\n        <nav className='navbar navbar-dark navbar-expand-lg bg-dark'>\r\n            <div className='navbar-brand'>\r\n                TODOwe4ka\r\n            </div>\r\n            {auth.isAuthenticated && <button onClick={logoutHandler} type=\"button\" className=\"btn btn-outline-light m-1\">Выйти</button>}\r\n        </nav>\r\n    )\r\n}\r\n","import React, {useContext} from 'react'\r\nimport {AlertContext} from \"../context/alert/alertContext\";\r\n\r\nexport const Alert = () => {\r\n\r\n    const {alert, hide} = useContext(AlertContext);\r\n\r\n    if (!alert.visible) return null;\r\n\r\n    return (\r\n        <div className={`alert alert-${alert.type || 'warning'} alert-dismissible`}>\r\n            <strong>{alert.type === 'success' ? 'Ух ты! ' : 'Эмм... '}</strong>\r\n            {alert.text}\r\n            <button onClick={hide} type=\"button\" className=\"btn-close\" aria-label=\"Close\"></button>\r\n        </div>\r\n    )\r\n}\r\n","export const SHOW_ALERT = 'SHOW_ALERT';\r\nexport const HIDE_ALERT = 'HIDE_ALERT';\r\nexport const SHOW_LOADER = 'SHOW_LOADER';\r\nexport const ADD_NOTE = 'ADD_NOTE';\r\nexport const FETCH_NOTES = 'FETCH_NOTES';\r\nexport const REMOVE_NOTE = 'REMOVE_NOTE';\r\nexport const UPDATE_NOTE = 'UPDATE_NOTE';\r\n\r\n","import {HIDE_ALERT, SHOW_ALERT} from \"../types\";\r\n\r\nconst handlers = {\r\n    DEFAULT: state => state,\r\n    [SHOW_ALERT]:(state, {payload}) => ({...payload, visible:true}),\r\n    [HIDE_ALERT]:state => ({...state, visible:false})\r\n}\r\n\r\nexport const alertReducer = (state, action) => {\r\n    const handle =handlers[action.type] || handlers.DEFAULT;\r\n    return handle(state, action)\r\n}","import React, {useReducer} from 'react';\r\nimport {AlertContext} from \"./alertContext\";\r\nimport {alertReducer} from \"./alertReducer\";\r\nimport {HIDE_ALERT, SHOW_ALERT} from \"../types\";\r\n\r\nexport const AlertState = ({children}) =>{\r\n    const [state, dispatch] = useReducer(alertReducer, {visible: false});\r\n\r\n    const show = (text, type = 'warning') => {\r\n        dispatch({\r\n            type: SHOW_ALERT,\r\n            payload: {text, type}\r\n        })\r\n\r\n        setTimeout(hide, 3000);\r\n    }\r\n\r\n    const hide = () => dispatch({type: HIDE_ALERT})\r\n\r\n    return (\r\n        <AlertContext.Provider value={{\r\n            show, hide,\r\n            alert: state\r\n        }}>\r\n            {children}\r\n        </AlertContext.Provider>\r\n    )\r\n}\r\n","import {createContext} from 'react'\r\n\r\nexport const APIContext = createContext();\r\n","import React, {useState, useContext} from 'react';\r\nimport {AlertContext} from \"../context/alert/alertContext\";\r\nimport {APIContext} from \"../context/api/apiContext\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\n\r\nexport const InputForm = ()=>{\r\n    const [value, setValue] = useState('');\r\n    const alert = useContext(AlertContext);\r\n    const {addNote} = useContext(APIContext);\r\n\r\n    const {token} = useContext(AuthContext);\r\n\r\n\r\n    const submitHandler = event => {\r\n        event.preventDefault();\r\n        if (value.trim()){\r\n            //создать заметку\r\n            addNote(value,token);\r\n\r\n            setValue('')\r\n        }\r\n        else {\r\n            alert.show('Заметка пустая');\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={submitHandler} className='form-inline'>\r\n            <div className='form-group'>\r\n                <div className=\"input-group\">\r\n                    <input\r\n                        type='text'\r\n                        className='form-control'\r\n                        placeholder='Введите текст заметки'\r\n                        value={value}\r\n                        onChange={event => {setValue(event.target.value)}}\r\n                    />\r\n                    <div className=\"input-group-append\">\r\n                        <button type=\"submit\" className=\"btn btn-outline-secondary\">Добавить</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </form>\r\n        )\r\n}\r\n","import React, {useContext} from 'react';\r\nimport {APIContext} from \"../context/api/apiContext\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\n\r\nexport const Notes = ({notes, filter}) => {\r\n\r\n    const {removeNote, updateNote} = useContext(APIContext);\r\n\r\n    const {token} = useContext(AuthContext);\r\n\r\n\r\n    return (\r\n        <ul className='list-group'>\r\n            {notes.filter(note => {\r\n                switch (filter){\r\n                    case 0:\r\n                        return true;\r\n                    case 1:\r\n                        return note.done;\r\n                    case 2:\r\n                        return !note.done;\r\n                }\r\n                return true;\r\n            }).map((note)=>(\r\n                <li\r\n                    className='list-group-item note'\r\n                    key = {note.id}>\r\n                    <div className='note-text'>\r\n                        <strong style={note.done ? {textDecoration:'line-through'} : {}}> {note.text} </strong>\r\n                        <div className='text-info text-sm-start'>{new Date(note.createdAt).toLocaleString()}</div>\r\n                    </div>\r\n\r\n                    <div className='buttons'>\r\n                        <button onClick={() => updateNote(note._id, !note.done, token)} type=\"button\" className={note.done ? \"btn btn-success btn-sm mx-1\" : \"btn btn-outline-success btn-sm mx-1\"}>&#128504;</button>\r\n                        <button onClick={() => removeNote(note._id, token)} type=\"button\" className=\"btn btn-outline-danger btn-sm mx-1\">&times;</button>\r\n                    </div>\r\n\r\n                </li>\r\n            ))}\r\n\r\n        </ul>\r\n    )\r\n}\r\n","import React from \"react\";\r\n\r\nexport const Filter = ({filter, setFilter}) => {\r\n\r\n    return (\r\n        <div className='filter'>\r\n            <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                <button onClick={() => setFilter(0)} type=\"button\" className={`btn btn${filter===0 ? '' : '-outline'}-secondary`}>Все</button>\r\n                <button onClick={() =>setFilter(1)} type=\"button\" className={`btn btn${filter===1 ? '' : '-outline'}-secondary`}>Выполненные</button>\r\n                <button onClick={() =>setFilter(2)} type=\"button\" className={`btn btn${filter===2 ? '' : '-outline'}-secondary`}>Невыполненные</button>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n","import React, {Fragment, useContext, useEffect, useState} from 'react';\r\nimport {InputForm} from \"../components/InputForm\";\r\nimport {Notes} from \"../components/Notes\";\r\nimport {APIContext} from \"../context/api/apiContext\";\r\nimport {Filter} from \"../components/Filter\";\r\n\r\nimport {AuthContext} from \"../context/AuthContext\";\r\n\r\nexport const Home = () => {\r\n\r\n    const {loading, notes, fetchNotes} = useContext(APIContext);\r\n    const {token} = useContext(AuthContext);\r\n\r\n    const [filter, setFilter] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        fetchNotes(token);\r\n\r\n    }, [])\r\n\r\n    return (\r\n        <Fragment>\r\n            <InputForm/>\r\n            <hr/>\r\n            <Filter filter={filter} setFilter={setFilter}/>\r\n            <Notes notes={notes} filter={filter} />\r\n        </Fragment>\r\n    )\r\n}\r\n","import React, {useContext, useEffect, useState, Fragment} from 'react'\r\nimport {useHttp} from \"../hooks/http.hook\";\r\nimport {useMessage} from \"../hooks/message.hook\";\r\nimport {AuthContext} from \"../context/AuthContext\";\r\n\r\n\r\nexport const AuthPage = () =>{\r\n    const auth = useContext(AuthContext);\r\n    const message = useMessage();\r\n    const {loading, error, request, clearError} = useHttp();\r\n\r\n    const [form, setForm] = useState({\r\n        email:'',\r\n        password:''\r\n    });\r\n\r\n    useEffect(()=>{\r\n        message(error);\r\n        clearError();\r\n    }, [error, message, clearError])\r\n\r\n    const changeHandler = event => {\r\n        setForm({...form, [event.target.name]:event.target.value})\r\n    }\r\n\r\n    const registerHandler = async () => {\r\n        try{\r\n            const  data = await request('/api/auth/register','POST', {...form});\r\n            message(data.message);\r\n        }\r\n        catch (e){\r\n\r\n        }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try{\r\n            const  data = await request('/api/auth/login','POST', {...form});\r\n            auth.login(data.token, data.userId);\r\n        }\r\n        catch (e){\r\n\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            <div className=\"card\">\r\n                <h5 className=\"card-header\">Авторизация</h5>\r\n                <div className=\"card-body\">\r\n                    <div className=\"form-floating mb-3\">\r\n                        <input onChange={changeHandler} type=\"email\" className=\"form-control\" id=\"email\" name=\"email\" placeholder=\"name@example.com\"/>\r\n                            <label htmlFor=\"email\">Email address</label>\r\n                    </div>\r\n                    <div className=\"form-floating\">\r\n                        <input onChange={changeHandler} type=\"password\" className=\"form-control\" id=\"password\" name=\"password\" placeholder=\"Password\"/>\r\n                            <label htmlFor=\"password\">Password</label>\r\n                    </div>\r\n\r\n                    <hr/>\r\n\r\n                    <button  onClick={loginHandler} disabled={loading} className=\"btn btn-primary m-1\">Войти</button>\r\n                    <button  onClick={registerHandler} disabled={loading} className=\"btn btn-outline-primary\">Зарегистрироваться</button>\r\n                </div>\r\n            </div>\r\n        </Fragment>\r\n    )\r\n}\r\n","import {useCallback} from \"react\";\r\n\r\nexport const useMessage = () =>{\r\n    return useCallback(text => {\r\n        //TODO заменить на react-bootstrap Toast\r\n        if (window.M && text){\r\n            window.M.toast({html:text});\r\n        }\r\n    },[])\r\n}\r\n","import {useState, useCallback} from 'react'\r\n\r\nexport const useHttp = () => {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n        setLoading(true);\r\n        try{\r\n            if(body){\r\n                body = JSON.stringify(body);\r\n                headers['Content-Type'] = 'application/json';\r\n            }\r\n           const  response = await fetch(url, {\r\n               method, body, headers\r\n           })\r\n\r\n            const data = await response.json();\r\n\r\n           if (!response.ok){\r\n               throw new Error(data.message || 'Ошибочка вышла')\r\n           }\r\n\r\n           setLoading(false);\r\n\r\n           return data;\r\n        }\r\n        catch (e){\r\n            setLoading(false);\r\n            setError(e.message);\r\n            throw e;\r\n        }\r\n    }, []);\r\n\r\n    const clearError = useCallback( ()=> setError(null),[]);\r\n\r\n    return {loading, request, error, clearError}\r\n}\r\n","import {useState, useCallback, useEffect} from 'react'\r\n\r\nconst storageName = 'userData';\r\n\r\nexport const useAuth = () => {\r\n\r\n    const [token, setToken] = useState(null);\r\n    const [userId, setUserId] = useState(null);\r\n\r\n    const login = useCallback( (jwtToken, id) => {\r\n        setToken(jwtToken);\r\n        setUserId(id);\r\n        localStorage.setItem(storageName, JSON.stringify({userId:id, token:jwtToken}));\r\n\r\n    }, []);\r\n    const logout = useCallback( () => {\r\n        setToken(null);\r\n        setUserId(null);\r\n        localStorage.removeItem(storageName);\r\n    }, []);\r\n\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName));\r\n\r\n        if(data && data.token){\r\n            login(data.token, data.userId);\r\n        }\r\n\r\n    },[login]);\r\n\r\n    return {login, logout, token, userId}\r\n\r\n}\r\n","import {ADD_NOTE, FETCH_NOTES, REMOVE_NOTE, SHOW_LOADER, UPDATE_NOTE} from \"../types\";\r\n\r\nconst handlers = {\r\n    [SHOW_LOADER]: state => ({...state, loading:true}),\r\n    [ADD_NOTE]: (state, {payload}) => ({...state, notes: [...state.notes, payload]}),\r\n    [FETCH_NOTES]: (state, {payload}) => ({...state, notes:payload, loading:false}),\r\n    [REMOVE_NOTE]: (state, {payload}) => ({...state, notes: state.notes.filter(note => note._id !== payload)}),\r\n    [UPDATE_NOTE]: (state, {payload}) => ({...state, notes: state.notes.map((curr)=>{if(curr._id === payload.id) curr.done = payload.flag ;return curr})}),\r\n    DEFAULT: state => state\r\n}\r\n\r\nexport  const  apiReducer = (state, action)=>{\r\n    const handle = handlers[action.type]  ||  handlers.DEFAULT\r\n    return handle(state, action);\r\n}\r\n","import React, { useContext, useReducer } from \"react\";\r\nimport {APIContext} from \"./apiContext\";\r\nimport {apiReducer} from \"./apiReducer\";\r\nimport axios from \"axios\";\r\nimport {ADD_NOTE, FETCH_NOTES, REMOVE_NOTE, SHOW_LOADER, UPDATE_NOTE} from \"../types\";\r\nimport {AlertContext} from \"../alert/alertContext\";\r\n\r\n\r\nconst baseUrl = process.env.API_BASE || 'http://localhost:5000';\r\n\r\nexport const APIState = ({children}) =>{\r\n    const initialState = {\r\n        notes:[],\r\n        loading:false\r\n    }\r\n\r\n    const alert = useContext(AlertContext);\r\n\r\n    const [state, dispatch] = useReducer(apiReducer, initialState);\r\n\r\n    const showLoader = () => dispatch({type:SHOW_LOADER});\r\n\r\n    const fetchNotes = async (token) => {\r\n        showLoader();\r\n        const config = {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + token\r\n            }\r\n        }\r\n        const res = await axios.get(`${baseUrl}/api/note/`, config);\r\n\r\n        const payload = Object.keys(res.data).map(key => {\r\n            return {\r\n                ...res.data[key],\r\n                id:key\r\n            }\r\n        })\r\n\r\n        dispatch({\r\n            type:FETCH_NOTES,\r\n            payload\r\n        })\r\n    }\r\n\r\n    const addNote = async (text, token) => {\r\n        const note = {\r\n            text\r\n        }\r\n        const config = {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + token\r\n            }\r\n        }\r\n        try{\r\n            const res = await axios.post(`${baseUrl}/api/note/add`, note, config)\r\n\r\n            const payload = {\r\n                ...res.data.note,\r\n                id:res.data.note._id\r\n            }\r\n            if (res.status === 200) alert.show('Заметка создана', 'success');\r\n\r\n            dispatch({type:ADD_NOTE, payload})\r\n        }\r\n        catch (e) {\r\n            throw new Error(e.message)\r\n        }\r\n\r\n    }\r\n\r\n    const removeNote = async (id, token) => {\r\n        const note = {\r\n            id\r\n        }\r\n        const config = {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + token\r\n            }\r\n        }\r\n        const res = await axios.post(`${baseUrl}/api/note/remove`, note, config)\r\n\r\n        if (res.status === 200) alert.show('Заметка удалена', 'warning');\r\n        dispatch({type: REMOVE_NOTE, payload: id})\r\n    }\r\n\r\n    const updateNote = async (id, flag, token) => {\r\n        const note = {\r\n            id,\r\n            done:flag\r\n        }\r\n        const config = {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + token\r\n            }\r\n        }\r\n        const res = await axios.post(`${baseUrl}/api/note/update`, note, config)\r\n\r\n        if (res.status === 200) alert.show('Заметка обновлена', 'success');\r\n        dispatch({type:UPDATE_NOTE, payload:{id, flag}})\r\n    }\r\n\r\n    return (\r\n        <APIContext.Provider value={{\r\n           showLoader,  addNote, removeNote, fetchNotes, updateNote,\r\n            loading: state.loading,\r\n            notes: state.notes\r\n        }}>\r\n            {children}\r\n        </APIContext.Provider>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport {BrowserRouter} from \"react-router-dom\";\r\nimport {Navbar} from './components/Navbar'\r\nimport {Alert} from \"./components/Alert\";\r\nimport {AlertState} from \"./context/alert/AlertState\";\r\nimport {useRoutes} from \"./routes\";\r\nimport 'materialize-css';\r\nimport {useAuth} from \"./hooks/auth.hook\";\r\nimport {AuthContext} from \"./context/AuthContext\";\r\nimport {APIState} from \"./context/api/APIState\";\r\n\r\nfunction App() {\r\n    const {token, login, logout, userId} = useAuth();\r\n    const isAuthenticated = !!token;\r\n    const routes = useRoutes(isAuthenticated);\r\n\r\n  return (\r\n\r\n      <AlertState>\r\n          <AuthContext.Provider value={{token, userId, login, logout, isAuthenticated}}>\r\n                  <APIState>\r\n                        <BrowserRouter>\r\n                            <Navbar/>\r\n                            <div className=\"container pt-4\">\r\n                                <Alert/>\r\n                                {routes}\r\n                            </div>\r\n                        </BrowserRouter>\r\n                  </APIState>\r\n          </AuthContext.Provider>\r\n      </AlertState>\r\n\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport  {Switch, Route, Redirect} from 'react-router-dom';\r\nimport {Home} from \"./pages/Home\";\r\nimport {AuthPage} from \"./pages/AuthPage\";\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n    if (isAuthenticated){\r\n        return (\r\n            <Switch>\r\n                <Route path={'/'} exact component={Home}/>\r\n                <Redirect to='/'/>\r\n            </Switch>\r\n        )\r\n    }\r\n    return (\r\n        <Switch>\r\n            <Route path={'/'} exact component={AuthPage}/>\r\n            <Redirect to='/'/>\r\n        </Switch>\r\n    )\r\n\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nrequire('dotenv').config();\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}